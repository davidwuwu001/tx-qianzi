# 🚀 快速启动指南

## 当前状态检查

✅ **Node.js 版本**: v22.16.0 (满足要求)

## 立即开始

### 1️⃣ 安装依赖（如果还没安装）

```powershell
npm install
```

### 2️⃣ 创建环境变量文件

在项目根目录创建 `.env` 文件，复制以下内容并修改：

```env
# 数据库配置（必须）
DATABASE_URL="mysql://root:你的密码@localhost:3306/tencent_esign"

# NextAuth 配置（必须）
NEXTAUTH_SECRET="请生成一个随机密钥"
NEXTAUTH_URL="http://localhost:3000"

# 腾讯云配置（可选，用于测试签署功能）
TENCENT_SECRET_ID=""
TENCENT_SECRET_KEY=""
TENCENT_ESIGN_OPERATOR_ID=""
TENCENT_ESIGN_TEMPLATE_ID=""
PARTY_A_ORG_NAME=""
PARTY_A_SIGNER_NAME=""
PARTY_A_SIGNER_MOBILE=""
```

**快速生成 NEXTAUTH_SECRET**（在 PowerShell 中运行）：
```powershell
[Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 }))
```

### 3️⃣ 创建数据库

在 MySQL 中执行：

```sql
CREATE DATABASE tencent_esign CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 4️⃣ 初始化数据库

```powershell
# 生成 Prisma 客户端
npx prisma generate

# 推送数据库结构
npx prisma db push

# 创建测试数据
npm run db:seed
```

### 5️⃣ 启动开发服务器

```powershell
npm run dev
```

### 6️⃣ 访问应用

- **管理端**: http://localhost:3000/login
  - 系统管理员: `sysadmin` / `SysAdmin123!`
  - 城市管理员: `cityadmin` / `CityAdmin123!`

- **移动端**: http://localhost:3000/m/login

## ⚠️ 常见问题

### 数据库连接失败
- 检查 MySQL 服务是否运行
- 检查 `.env` 中的 `DATABASE_URL` 是否正确
- 确认数据库已创建

### 端口被占用
- 关闭占用 3000 端口的程序
- 或修改端口：`npm run dev -- -p 3001`

## 📖 详细文档

查看 `本地运行指南.md` 获取更详细的说明。



